---
import { type CollectionEntry, getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import formatDate from "../../utils/formatDate";

export async function getStaticPaths() {
	const posts = await getCollection("posts");

	return posts.map((post) => ({
		params: { slug: post.slug },
		props: { post },
	}));
}

type Props = {
	post: CollectionEntry<"posts">;
};

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
	<main class="post mx-auto flex w-full max-w-3xl flex-col gap-4">
		<div
			class="flex justify-between items-center font-semibold text-neutral-50 mb-8"
		>
			<p class="text-2xl mb-2">
				{post.data.title}
			</p>
			<p class="mb-2">{formatDate(post.data.publishedAt)}</p>
		</div>
		<Content />
	</main>
</Layout>
